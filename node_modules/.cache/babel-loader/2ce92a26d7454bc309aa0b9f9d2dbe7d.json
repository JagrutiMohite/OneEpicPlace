{"remainingRequest":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/babel-loader/lib/index.js!/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/src/views/3. user views/components/calendars/DailyViewCalendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/src/views/3. user views/components/calendars/DailyViewCalendar.vue","mtime":1562358994137},{"path":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _parseInt from \"/Users/jagrutimohite/Documents/web page internship/OneEpicPlace/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as api from '@/services/api_access';\nexport default {\n  data: function data() {\n    return {\n      //Date for calender\n      date: null,\n      //locations include: id, name, type\n      locations: this.$parent.locations,\n      //hours include: id, time\n      hours: this.$parent.hours,\n      //List of returned bookings\n      bookings: [],\n      //Interval to check the server for bookings\n      checkBookingsTimeout: null,\n      bookingDelays: 0,\n      //A timeout function that runs every min\n      timeHighlighterTimeout: null,\n      timeHighlighterDelay: 0,\n      //Time slot hover highlighting\n      previousTimeSlotColor: ''\n    };\n  },\n  methods: {\n    /* Date Functions */\n    getDate: function getDate() {\n      var date = new Date();\n      date.setHours(0, 0, 0, 0);\n      this.date = date;\n    },\n    decDate: function decDate() {\n      this.date = new Date(this.date.setDate(this.date.getDate() - 1));\n      this.checkBookings();\n    },\n    incDate: function incDate() {\n      this.date = new Date(this.date.setDate(this.date.getDate() + 1));\n      this.checkBookings();\n    },\n\n    /* JavaScript Styling */\n    styleDeskElements: function styleDeskElements(location) {\n      if (location.type == 'room') {\n        for (var i = 0; i < this.locations.length; i++) {\n          if (this.locations[i] == location && i + 1 < this.locations.length && this.locations[i + 1].type == 'desk') return 'margin-bottom: 20px;';\n        }\n      } else if (location.type == 'desk') return 'height: 30px;';\n    },\n    styleTimeSlot: function styleTimeSlot(timeSlot) {\n      if (timeSlot % 3 == 0) return 'border-right: 1px black solid;';\n    },\n    styleTimeHighlighterLoop: function styleTimeHighlighterLoop() {\n      var THIS = this;\n      this.timeHighlighterTimeout = setTimeout(function () {\n        THIS.timeHighlighterDelay = (60 - new Date().getSeconds()) * 1000;\n\n        var currentHour = _parseInt(new Date().getHours());\n\n        var currentMin = _parseInt(new Date().getMinutes());\n\n        for (var row = 0; row < THIS.locations.length; row++) {\n          for (var timeSlot = 1; timeSlot <= THIS.hours.length * 12; timeSlot++) {\n            var timeSlotHour = _parseInt((timeSlot - 1) / 12, 10) + _parseInt(THIS.hours[0].time.substring(0, THIS.hours[0].time.length - 2));\n\n            var timeSlotMin = (timeSlot - 1) % 12 * 5;\n            document.getElementById('timeSlot' + row + ':' + timeSlot).style.backgroundColor = 'white';\n\n            if (timeSlotHour == currentHour) {\n              if (currentMin >= 0 && currentMin < 15 && timeSlotMin >= 0 && timeSlotMin < 15) document.getElementById('timeSlot' + row + ':' + timeSlot).style.backgroundColor = 'Gainsboro';else if (currentMin >= 15 && currentMin < 30 && timeSlotMin >= 15 && timeSlotMin < 30) document.getElementById('timeSlot' + row + ':' + timeSlot).style.backgroundColor = 'Gainsboro';else if (currentMin >= 30 && currentMin < 45 && timeSlotMin >= 30 && timeSlotMin < 45) document.getElementById('timeSlot' + row + ':' + timeSlot).style.backgroundColor = 'Gainsboro';else if (currentMin >= 45 && currentMin < 60 && timeSlotMin >= 45 && timeSlotMin < 60) document.getElementById('timeSlot' + row + ':' + timeSlot).style.backgroundColor = 'Gainsboro';\n            }\n          }\n        }\n\n        THIS.styleTimeHighlighterLoop();\n      }, this.timeHighlighterDelay);\n    },\n    styleBooking: function styleBooking(locationID, booking) {\n      if (locationID == booking.locationID) {\n        var startTime = booking.startTime;\n\n        var startTimeHour = _parseInt(startTime.split(':')[0], 10);\n\n        var startTimeMin = _parseInt(startTime.split(':')[1], 10);\n\n        var startTimeSlot = (startTimeHour - this.hours[0].time.substring(0, this.hours[0].time.length - 2)) * 12 + startTimeMin / 5 + 1;\n        var endTime = booking.endTime;\n\n        var endTimeHour = _parseInt(endTime.split(':')[0], 10);\n\n        var endTimeMin = _parseInt(endTime.split(':')[1], 10);\n\n        var endTimeSlot = (endTimeHour - this.hours[0].time.substring(0, this.hours[0].time.length - 2)) * 12 + endTimeMin / 5 + 1;\n        /*  \n        Left is tricky because getting the bounds is not relative to inside the row, getting the left value of the \n        first slot and subtractiing it from the used slot solves this problem\n        */\n\n        var left = document.getElementById('timeSlot' + locationID + ':' + startTimeSlot).getBoundingClientRect().left - document.getElementById('timeSlot' + locationID + ':' + 1).getBoundingClientRect().left;\n        var width = (endTimeSlot - startTimeSlot) * document.getElementById('timeSlot' + locationID + ':' + startTimeSlot).getBoundingClientRect().width;\n        return 'left:' + left + 'px; width:' + width + 'px;background-color:' + booking.bookingColor + ';';\n      }\n\n      return 'left: 0px; width: 0px; height: 0px; display: none;';\n    },\n    styleIcon: function styleIcon(booking) {\n      var volumeOn = require('../../../../assets/volumeOn-white.png');\n\n      var volumeOff = require('../../../../assets/volumeOff-white.png');\n\n      if (booking.noiseLevel > 0) return 'background-image: url(' + volumeOn + ');';else if (booking.noiseLevel < 0) return 'background-image: url(' + volumeOff + ');';\n    },\n    styleTitle: function styleTitle(booking) {\n      if (booking.noiseLevel != 0) return 'width: calc(100% - 27px);';\n    },\n\n    /* Data Update */\n    checkBookingsLoop: function checkBookingsLoop() {\n      var THIS = this;\n      this.checkBookingsTimeout = setTimeout(function () {\n        THIS.bookingsDelay = 5000;\n        var date = THIS.date.toJSON().slice(0, 10);\n        var refDate = THIS.date;\n        api.getBookingsDate(date, date).then(function (bookingsResult) {\n          if (refDate != THIS.date) return;\n          THIS.bookings = bookingsResult;\n          THIS.checkBookingsLoop();\n        });\n      }, this.bookingsDelay);\n    },\n    checkBookings: function checkBookings() {\n      this.bookings = [];\n      clearTimeout(this.checkBookingsTimeout);\n      this.bookingsDelay = 0;\n      this.checkBookingsLoop();\n    },\n\n    /* User Actions */\n    handlePageScroll: function handlePageScroll() {\n      //Top Row Sticky Movment\n      var originalTop = document.getElementById('calendar').getBoundingClientRect().top + window.scrollY;\n      if (window.scrollY >= originalTop) document.getElementById('topRow').style.top = window.scrollY - originalTop + 'px';else document.getElementById('topRow').style.top = '0px';\n    },\n    handleInnerSectionScroll: function handleInnerSectionScroll() {\n      //Make sure calender y cant be changed\n      document.getElementById('innerSection').scrollTop = 0;\n    },\n    timeSlotHover: function timeSlotHover(id, mouseOverTimeSlot) {\n      if (mouseOverTimeSlot) {\n        this.previousTimeSlotColor = document.getElementById(id).style.backgroundColor;\n        document.getElementById(id).style.backgroundColor = 'silver';\n      }\n\n      if (!mouseOverTimeSlot) document.getElementById(id).style.backgroundColor = this.previousTimeSlotColor;\n    },\n    timeSlotClicked: function timeSlotClicked(location, id) {\n      id = id.slice(8).split(':');\n      var startTime = [_parseInt((id[1] - 1) / 12, 10) + _parseInt(this.hours[0].time.substring(0, this.hours[0].time.length - 2)), (id[1] - 1) % 12 * 5];\n      var endTime = [startTime[0], startTime[1]];\n\n      if (startTime[1] == 55) {\n        endTime[0] += 1;\n        endTime[1] = 0;\n      } else endTime[1] += 5;\n\n      if (startTime[0] < 10) startTime[0] = '0' + startTime[0];\n      if (startTime[1] < 10) startTime[1] = '0' + startTime[1];\n      if (endTime[0] < 10) endTime[0] = '0' + endTime[0];\n      if (endTime[1] < 10) endTime[1] = '0' + endTime[1];\n      this.$parent.closeModals();\n      this.$parent.$refs.BookingModal.openModal(this.date, location, startTime[0] + ':' + startTime[1], endTime[0] + ':' + endTime[1]);\n    },\n    bookingClicked: function bookingClicked(booking) {\n      this.$parent.closeModals();\n      this.$parent.$refs.BookedModal.openModal(booking);\n    }\n  },\n  beforeMount: function beforeMount() {\n    //console.log('beforeMount');\n    this.getDate();\n  },\n  mounted: function mounted() {\n    //console.log('mounted');\n    //Start check booking loop\n    this.checkBookingsLoop(); //Start time highlighter loop\n\n    this.styleTimeHighlighterLoop(); //Start page scroll listener\n\n    window.addEventListener('scroll', this.handlePageScroll);\n  },\n  beforeDestroy: function beforeDestroy() {\n    //console.log('beforeDestroy');\n    //End check booking loop\n    clearTimeout(this.checkBookingsTimeout); //End time highlighter loop\n\n    clearTimeout(this.timeHighlighterTimeout); //End page scroll listener\n\n    window.removeEventListener('scroll', this.handlePageScroll);\n  }\n};",{"version":3,"sources":["DailyViewCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA,OAAA,KAAA,GAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA;AACA,MAAA,IAAA,EAAA,IAFA;AAIA;AACA,MAAA,SAAA,EAAA,KAAA,OAAA,CAAA,SALA;AAMA;AACA,MAAA,KAAA,EAAA,KAAA,OAAA,CAAA,KAPA;AASA;AACA,MAAA,QAAA,EAAA,EAVA;AAWA;AACA,MAAA,oBAAA,EAAA,IAZA;AAaA,MAAA,aAAA,EAAA,CAbA;AAeA;AACA,MAAA,sBAAA,EAAA,IAhBA;AAiBA,MAAA,oBAAA,EAAA,CAjBA;AAmBA;AACA,MAAA,qBAAA,EAAA;AApBA,KAAA;AAsBA,GAxBA;AA0BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA,qBAEA;AACA,UAAA,IAAA,GAAA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KANA;AAOA,IAAA,OAAA,EAAA,mBAAA;AACA,WAAA,IAAA,GAAA,IAAA,IAAA,CAAA,KAAA,IAAA,CAAA,OAAA,CAAA,KAAA,IAAA,CAAA,OAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,aAAA;AACA,KAVA;AAWA,IAAA,OAAA,EAAA,mBAAA;AACA,WAAA,IAAA,GAAA,IAAA,IAAA,CAAA,KAAA,IAAA,CAAA,OAAA,CAAA,KAAA,IAAA,CAAA,OAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,aAAA;AACA,KAdA;;AAgBA;AACA,IAAA,iBAjBA,6BAiBA,QAjBA,EAiBA;AACA,UAAA,QAAA,CAAA,IAAA,IAAA,MAAA,EAAA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,SAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,KAAA,SAAA,CAAA,CAAA,KAAA,QAAA,IAAA,CAAA,GAAA,CAAA,GAAA,KAAA,SAAA,CAAA,MAAA,IAAA,KAAA,SAAA,CAAA,CAAA,GAAA,CAAA,EAAA,IAAA,IAAA,MAAA,EACA,OAAA,sBAAA;AACA;AACA,OALA,MAMA,IAAA,QAAA,CAAA,IAAA,IAAA,MAAA,EACA,OAAA,eAAA;AACA,KA1BA;AA2BA,IAAA,aA3BA,yBA2BA,QA3BA,EA2BA;AACA,UAAA,QAAA,GAAA,CAAA,IAAA,CAAA,EACA,OAAA,gCAAA;AACA,KA9BA;AA+BA,IAAA,wBA/BA,sCA+BA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,sBAAA,GAAA,UAAA,CAAA,YAAA;AACA,QAAA,IAAA,CAAA,oBAAA,GAAA,CAAA,KAAA,IAAA,IAAA,GAAA,UAAA,EAAA,IAAA,IAAA;;AAEA,YAAA,WAAA,GAAA,UAAA,IAAA,IAAA,GAAA,QAAA,EAAA,CAAA;;AACA,YAAA,UAAA,GAAA,UAAA,IAAA,IAAA,GAAA,UAAA,EAAA,CAAA;;AACA,aAAA,IAAA,GAAA,GAAA,CAAA,EAAA,GAAA,GAAA,IAAA,CAAA,SAAA,CAAA,MAAA,EAAA,GAAA,EAAA,EAAA;AACA,eAAA,IAAA,QAAA,GAAA,CAAA,EAAA,QAAA,IAAA,IAAA,CAAA,KAAA,CAAA,MAAA,GAAA,EAAA,EAAA,QAAA,EAAA,EAAA;AACA,gBAAA,YAAA,GAAA,UAAA,CAAA,QAAA,GAAA,CAAA,IAAA,EAAA,EAAA,EAAA,IAAA,UAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA;;AACA,gBAAA,WAAA,GAAA,CAAA,QAAA,GAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AAEA,YAAA,QAAA,CAAA,cAAA,CAAA,aAAA,GAAA,GAAA,GAAA,GAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,OAAA;;AAEA,gBAAA,YAAA,IAAA,WAAA,EAAA;AACA,kBAAA,UAAA,IAAA,CAAA,IAAA,UAAA,GAAA,EAAA,IAAA,WAAA,IAAA,CAAA,IAAA,WAAA,GAAA,EAAA,EACA,QAAA,CAAA,cAAA,CAAA,aAAA,GAAA,GAAA,GAAA,GAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,WAAA,CADA,KAEA,IAAA,UAAA,IAAA,EAAA,IAAA,UAAA,GAAA,EAAA,IAAA,WAAA,IAAA,EAAA,IAAA,WAAA,GAAA,EAAA,EACA,QAAA,CAAA,cAAA,CAAA,aAAA,GAAA,GAAA,GAAA,GAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,WAAA,CADA,KAEA,IAAA,UAAA,IAAA,EAAA,IAAA,UAAA,GAAA,EAAA,IAAA,WAAA,IAAA,EAAA,IAAA,WAAA,GAAA,EAAA,EACA,QAAA,CAAA,cAAA,CAAA,aAAA,GAAA,GAAA,GAAA,GAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,WAAA,CADA,KAEA,IAAA,UAAA,IAAA,EAAA,IAAA,UAAA,GAAA,EAAA,IAAA,WAAA,IAAA,EAAA,IAAA,WAAA,GAAA,EAAA,EACA,QAAA,CAAA,cAAA,CAAA,aAAA,GAAA,GAAA,GAAA,GAAA,QAAA,EAAA,KAAA,CAAA,eAAA,GAAA,WAAA;AACA;AACA;AACA;;AAEA,QAAA,IAAA,CAAA,wBAAA;AACA,OA1BA,EA0BA,KAAA,oBA1BA,CAAA;AA2BA,KA5DA;AA6DA,IAAA,YA7DA,wBA6DA,UA7DA,EA6DA,OA7DA,EA6DA;AACA,UAAA,UAAA,IAAA,OAAA,CAAA,UAAA,EAAA;AACA,YAAA,SAAA,GAAA,OAAA,CAAA,SAAA;;AACA,YAAA,aAAA,GAAA,UAAA,SAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AACA,YAAA,YAAA,GAAA,UAAA,SAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AACA,YAAA,aAAA,GAAA,CAAA,aAAA,GAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,IAAA,EAAA,GAAA,YAAA,GAAA,CAAA,GAAA,CAAA;AAEA,YAAA,OAAA,GAAA,OAAA,CAAA,OAAA;;AACA,YAAA,WAAA,GAAA,UAAA,OAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AACA,YAAA,UAAA,GAAA,UAAA,OAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AACA,YAAA,WAAA,GAAA,CAAA,WAAA,GAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,IAAA,EAAA,GAAA,UAAA,GAAA,CAAA,GAAA,CAAA;AAEA;;;;;AAIA,YAAA,IAAA,GAAA,QAAA,CAAA,cAAA,CAAA,aAAA,UAAA,GAAA,GAAA,GAAA,aAAA,EAAA,qBAAA,GAAA,IAAA,GAAA,QAAA,CAAA,cAAA,CAAA,aAAA,UAAA,GAAA,GAAA,GAAA,CAAA,EAAA,qBAAA,GAAA,IAAA;AACA,YAAA,KAAA,GAAA,CAAA,WAAA,GAAA,aAAA,IAAA,QAAA,CAAA,cAAA,CAAA,aAAA,UAAA,GAAA,GAAA,GAAA,aAAA,EAAA,qBAAA,GAAA,KAAA;AAEA,eAAA,UAAA,IAAA,GAAA,YAAA,GAAA,KAAA,GAAA,sBAAA,GAAA,OAAA,CAAA,YAAA,GAAA,GAAA;AACA;;AACA,aAAA,oDAAA;AACA,KAnFA;AAoFA,IAAA,SApFA,qBAoFA,OApFA,EAoFA;AACA,UAAA,QAAA,GAAA,OAAA,CAAA,uCAAA,CAAA;;AACA,UAAA,SAAA,GAAA,OAAA,CAAA,wCAAA,CAAA;;AACA,UAAA,OAAA,CAAA,UAAA,GAAA,CAAA,EACA,OAAA,2BAAA,QAAA,GAAA,IAAA,CADA,KAEA,IAAA,OAAA,CAAA,UAAA,GAAA,CAAA,EACA,OAAA,2BAAA,SAAA,GAAA,IAAA;AACA,KA3FA;AA4FA,IAAA,UA5FA,sBA4FA,OA5FA,EA4FA;AACA,UAAA,OAAA,CAAA,UAAA,IAAA,CAAA,EACA,OAAA,2BAAA;AACA,KA/FA;;AAiGA;AACA,IAAA,iBAlGA,+BAkGA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,oBAAA,GAAA,UAAA,CAAA,YAAA;AACA,QAAA,IAAA,CAAA,aAAA,GAAA,IAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,IAAA,CAAA,MAAA,GAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,IAAA;AACA,QAAA,GAAA,CAAA,eAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,cAAA,EAAA;AACA,cAAA,OAAA,IAAA,IAAA,CAAA,IAAA,EACA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,cAAA;AACA,UAAA,IAAA,CAAA,iBAAA;AACA,SALA;AAMA,OAVA,EAUA,KAAA,aAVA,CAAA;AAWA,KA/GA;AAgHA,IAAA,aAhHA,2BAgHA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,MAAA,YAAA,CAAA,KAAA,oBAAA,CAAA;AACA,WAAA,aAAA,GAAA,CAAA;AACA,WAAA,iBAAA;AACA,KArHA;;AAuHA;AACA,IAAA,gBAxHA,8BAwHA;AACA;AACA,UAAA,WAAA,GAAA,QAAA,CAAA,cAAA,CAAA,UAAA,EAAA,qBAAA,GAAA,GAAA,GAAA,MAAA,CAAA,OAAA;AACA,UAAA,MAAA,CAAA,OAAA,IAAA,WAAA,EACA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,KAAA,CAAA,GAAA,GAAA,MAAA,CAAA,OAAA,GAAA,WAAA,GAAA,IAAA,CADA,KAGA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,KAAA,CAAA,GAAA,GAAA,KAAA;AACA,KA/HA;AAgIA,IAAA,wBAhIA,sCAgIA;AACA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,cAAA,EAAA,SAAA,GAAA,CAAA;AACA,KAnIA;AAqIA,IAAA,aArIA,yBAqIA,EArIA,EAqIA,iBArIA,EAqIA;AACA,UAAA,iBAAA,EAAA;AACA,aAAA,qBAAA,GAAA,QAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,CAAA,eAAA;AACA,QAAA,QAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,CAAA,eAAA,GAAA,QAAA;AACA;;AACA,UAAA,CAAA,iBAAA,EACA,QAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,CAAA,eAAA,GAAA,KAAA,qBAAA;AACA,KA5IA;AA6IA,IAAA,eA7IA,2BA6IA,QA7IA,EA6IA,EA7IA,EA6IA;AACA,MAAA,EAAA,GAAA,EAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,SAAA,GAAA,CACA,UAAA,CAAA,EAAA,CAAA,CAAA,CAAA,GAAA,CAAA,IAAA,EAAA,EAAA,EAAA,IAAA,UAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CADA,EAEA,CAAA,EAAA,CAAA,CAAA,CAAA,GAAA,CAAA,IAAA,EAAA,GAAA,CAFA,CAAA;AAIA,UAAA,OAAA,GAAA,CACA,SAAA,CAAA,CAAA,CADA,EAEA,SAAA,CAAA,CAAA,CAFA,CAAA;;AAKA,UAAA,SAAA,CAAA,CAAA,CAAA,IAAA,EAAA,EAAA;AACA,QAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA;AACA,QAAA,OAAA,CAAA,CAAA,CAAA,GAAA,CAAA;AACA,OAHA,MAKA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA;;AAEA,UAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAA,EACA,SAAA,CAAA,CAAA,CAAA,GAAA,MAAA,SAAA,CAAA,CAAA,CAAA;AACA,UAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAA,EACA,SAAA,CAAA,CAAA,CAAA,GAAA,MAAA,SAAA,CAAA,CAAA,CAAA;AACA,UAAA,OAAA,CAAA,CAAA,CAAA,GAAA,EAAA,EACA,OAAA,CAAA,CAAA,CAAA,GAAA,MAAA,OAAA,CAAA,CAAA,CAAA;AACA,UAAA,OAAA,CAAA,CAAA,CAAA,GAAA,EAAA,EACA,OAAA,CAAA,CAAA,CAAA,GAAA,MAAA,OAAA,CAAA,CAAA,CAAA;AAEA,WAAA,OAAA,CAAA,WAAA;AACA,WAAA,OAAA,CAAA,KAAA,CAAA,YAAA,CAAA,SAAA,CAAA,KAAA,IAAA,EAAA,QAAA,EAAA,SAAA,CAAA,CAAA,CAAA,GAAA,GAAA,GAAA,SAAA,CAAA,CAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,GAAA,GAAA,GAAA,OAAA,CAAA,CAAA,CAAA;AACA,KA1KA;AA4KA,IAAA,cA5KA,0BA4KA,OA5KA,EA4KA;AACA,WAAA,OAAA,CAAA,WAAA;AACA,WAAA,OAAA,CAAA,KAAA,CAAA,WAAA,CAAA,SAAA,CAAA,OAAA;AACA;AA/KA,GA1BA;AA4MA,EAAA,WA5MA,yBA4MA;AACA;AACA,SAAA,OAAA;AACA,GA/MA;AAgNA,EAAA,OAhNA,qBAgNA;AACA;AACA;AACA,SAAA,iBAAA,GAHA,CAIA;;AACA,SAAA,wBAAA,GALA,CAMA;;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,gBAAA;AACA,GAxNA;AAyNA,EAAA,aAzNA,2BAyNA;AACA;AACA;AACA,IAAA,YAAA,CAAA,KAAA,oBAAA,CAAA,CAHA,CAIA;;AACA,IAAA,YAAA,CAAA,KAAA,sBAAA,CAAA,CALA,CAMA;;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,KAAA,gBAAA;AACA;AAjOA,CAAA","sourcesContent":["<template>\n    <div class=\"DailyViewCalendar\"> \n\n        <!-- Container for date selector -->\n        <div class=\"dateSelector\">\n            <button id=\"dateSelectorPreviousBtn\" class=\"btn backBtn\" type=\"button\" @click=\"decDate()\"></button>\n            <input id=\"dateSelectorDate\" class=\"date\" :value=\"date.getMonth()+1+'/'+date.getDate()+'/'+date.getFullYear()\" disabled>\n            <button id=\"dateSelectorCalendar\" class=\"btn calendarBtn\" type=\"button\"></button>\n            <button id=\"dateSelectorPreviousBtn\" class=\"btn forwardBtn\" type=\"button\" @click=\"incDate()\"></button>\n        </div>\n\n        <!-- Calendar -->\n        <div class=\"calendar\" id='calendar'>\n\n            <!-- locations -->\n            <div class=\"locationCol\">\n                <div class=\"firstLocationPlaceHolder\"></div>\n                <div class=\"locationContainer\" v-for=\"location in locations\" :key=\"'locCon'+location.id\" :style='styleDeskElements(location)'>\n                    <div class=\"location\">\n                        <div class=\"text\">{{location.name}}</div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Inner Scrollable Section -->\n            <div class=\"innerSection\" id='innerSection' @scroll='handleInnerSectionScroll()'>\n                \n                <!-- Hours -->\n                <div class=\"topRow\" id='topRow'>\n                    <div class=\"hourContainer\" v-for=\"(hour, index) in hours\" :key=\"'hour'+index\">\n                        <div class=\"hour\">\n                            <div class=\"text\">{{hour.time}}</div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"calendarRow\"></div>\n\n                <!-- Calendar Rows -->\n                <div class=\"calendarRow\" v-for=\"(location, row) in locations\" :key=\"'row'+row\" :style='styleDeskElements(location)'>\n                    <!-- Booking Blocks -->\n                    <div class=\"booking\" v-for=\"booking in bookings\" :key=\"'booking'+booking.id\" :style='styleBooking(location.id, booking)' @click='bookingClicked(booking)'>\n                        <div v-if=\"location.type == 'room' && booking.noiseLevel != 0\" class=\"icon\" :style='styleIcon(booking)'></div>\n                        <div v-if=\"location.type == 'room'\" class=\"title\" :style='styleTitle(booking)'>{{booking.title}}</div>\n                        <div v-if=\"location.type == 'room'\" class=\"name\">{{booking.username}}</div>\n                        <div v-if=\"location.type == 'desk'\" class=\"centerText\">{{booking.username}}</div>\n                    </div>\n\n                    <!-- Time Slots -->\n                    <div class=\"timeChunk\" v-for=\"(hour, col) in hours\" :key=\"'tc'+col\">\n                        <div\n                            v-for=\"slot in 12\" :key=\"'ts'+row+':'+(col*12+slot)\" :id=\"'timeSlot'+row+':'+(col*12+slot)\" \n                            class=\"timeSlot\" :style='styleTimeSlot((col*12+slot))'\n                            @click=\"timeSlotClicked(location, 'timeSlot'+row+':'+(col*12+slot))\"\n                            @mouseenter=\"timeSlotHover('timeSlot'+row+':'+(col*12+slot), true)\"\n                            @mouseleave=\"timeSlotHover('timeSlot'+row+':'+(col*12+slot), false)\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped lang=\"scss\">\n    //Personal CSS\n    @import \"./css/DailyViewCalendar.css\";\n</style>\n\n<script>\n    import * as api from '@/services/api_access';\n\n    export default {\n        data() {\n            return {\n                //Date for calender\n                date: null,\n\n                //locations include: id, name, type\n                locations: this.$parent.locations,\n                //hours include: id, time\n                hours: this.$parent.hours,\n\n                //List of returned bookings\n                bookings: [],\n                //Interval to check the server for bookings\n                checkBookingsTimeout: null,\n                bookingDelays: 0,\n\n                //A timeout function that runs every min\n                timeHighlighterTimeout: null,\n                timeHighlighterDelay: 0,\n\n                //Time slot hover highlighting\n                previousTimeSlotColor: ''\n            }\n        },\n\n        methods: {\n            /* Date Functions */\n            getDate() {\n                var date = new Date();\n                date.setHours(0, 0, 0, 0);\n                this.date = date;\n            },\n            decDate: function() {\n                this.date = new Date(this.date.setDate(this.date.getDate() - 1));\n                this.checkBookings();\n            },\n            incDate: function() {\n                this.date = new Date(this.date.setDate(this.date.getDate() + 1));\n                this.checkBookings();\n            },\n\n            /* JavaScript Styling */\n            styleDeskElements(location) {\n                if (location.type == 'room') {\n                    for (var i = 0; i < this.locations.length; i++) {\n                        if (this.locations[i] == location && i+1 < this.locations.length && this.locations[i+1].type == 'desk')\n                            return 'margin-bottom: 20px;';\n                    }\n                }\n                else if (location.type == 'desk')\n                    return 'height: 30px;';\n            },\n            styleTimeSlot(timeSlot) {\n                if (timeSlot%3 == 0)\n                    return 'border-right: 1px black solid;';\n            },\n            styleTimeHighlighterLoop() {\n                var THIS = this;\n                this.timeHighlighterTimeout = setTimeout(function() {\n                    THIS.timeHighlighterDelay = (60 - new Date().getSeconds()) * 1000;\n                    \n                    var currentHour = parseInt(new Date().getHours());\n                    var currentMin = parseInt(new Date().getMinutes());\n                    for (var row = 0; row < THIS.locations.length; row++) {\n                        for (var timeSlot = 1; timeSlot <= THIS.hours.length*12; timeSlot++) {\n                            var timeSlotHour = parseInt((timeSlot-1)/12, 10) + parseInt(THIS.hours[0].time.substring(0, THIS.hours[0].time.length - 2));\n                            var timeSlotMin = (timeSlot-1) % 12 * 5;\n                            \n                            document.getElementById('timeSlot'+row+':'+timeSlot).style.backgroundColor = 'white';\n                            \n                            if (timeSlotHour == currentHour) {\n                                if (currentMin >= 0 && currentMin < 15 && timeSlotMin >= 0 && timeSlotMin < 15)\n                                    document.getElementById('timeSlot'+row+':'+timeSlot).style.backgroundColor = 'Gainsboro';\n                                else if (currentMin >= 15 && currentMin < 30 && timeSlotMin >= 15 && timeSlotMin < 30)\n                                    document.getElementById('timeSlot'+row+':'+timeSlot).style.backgroundColor = 'Gainsboro';\n                                else if (currentMin >= 30 && currentMin < 45 && timeSlotMin >= 30 && timeSlotMin < 45)\n                                    document.getElementById('timeSlot'+row+':'+timeSlot).style.backgroundColor = 'Gainsboro';\n                                else if (currentMin >= 45 && currentMin < 60 && timeSlotMin >= 45 && timeSlotMin < 60)\n                                    document.getElementById('timeSlot'+row+':'+timeSlot).style.backgroundColor = 'Gainsboro';\n                            }\n                        }\n                    }\n                    \n                    THIS.styleTimeHighlighterLoop();\n                }, this.timeHighlighterDelay)\n            },\n            styleBooking(locationID, booking) {\n                if (locationID == booking.locationID) {\n                    var startTime = booking.startTime;\n                    var startTimeHour = parseInt(startTime.split(':')[0], 10);\n                    var startTimeMin = parseInt(startTime.split(':')[1], 10);\n                    var startTimeSlot = ((startTimeHour - this.hours[0].time.substring(0, this.hours[0].time.length - 2)) * 12) + (startTimeMin / 5) + 1;\n                    \n                    var endTime = booking.endTime;\n                    var endTimeHour = parseInt(endTime.split(':')[0], 10);\n                    var endTimeMin = parseInt(endTime.split(':')[1], 10);\n                    var endTimeSlot = ((endTimeHour - this.hours[0].time.substring(0, this.hours[0].time.length - 2)) * 12) + (endTimeMin / 5) + 1;\n\n                    /*  \n                    Left is tricky because getting the bounds is not relative to inside the row, getting the left value of the \n                    first slot and subtractiing it from the used slot solves this problem\n                    */\n                    var left = document.getElementById('timeSlot'+locationID+':'+startTimeSlot).getBoundingClientRect().left - document.getElementById('timeSlot'+locationID+':'+1).getBoundingClientRect().left;\n                    var width = (endTimeSlot - startTimeSlot) * document.getElementById('timeSlot'+locationID+':'+startTimeSlot).getBoundingClientRect().width;\n\n                    return 'left:'+left+'px; width:'+width+'px;background-color:'+booking.bookingColor+';';\n                }\n                return 'left: 0px; width: 0px; height: 0px; display: none;';\n            },\n            styleIcon(booking) {\n                var volumeOn = require('../../../../assets/volumeOn-white.png');\n                var volumeOff = require('../../../../assets/volumeOff-white.png');\n                if (booking.noiseLevel > 0)\n                    return 'background-image: url('+volumeOn+');';\n                else if (booking.noiseLevel < 0)\n                    return 'background-image: url('+volumeOff+');';\n            },\n            styleTitle(booking) {\n                if (booking.noiseLevel != 0)\n                    return 'width: calc(100% - 27px);';\n            },\n\n            /* Data Update */\n            checkBookingsLoop() {\n                var THIS = this;\n                this.checkBookingsTimeout = setTimeout(function() {\n                    THIS.bookingsDelay = 5000;\n                    var date = THIS.date.toJSON().slice(0, 10);\n                    var refDate = THIS.date;\n                    api.getBookingsDate(date, date).then(bookingsResult => {\n                        if (refDate != THIS.date)\n                            return;\n                        THIS.bookings = bookingsResult;\n                        THIS.checkBookingsLoop();\n                    });\n                }, this.bookingsDelay)\n            },\n            checkBookings() {\n                this.bookings = [];\n                clearTimeout(this.checkBookingsTimeout);\n                this.bookingsDelay = 0;\n                this.checkBookingsLoop();\n            },\n\n            /* User Actions */\n            handlePageScroll() {\n                //Top Row Sticky Movment\n                var originalTop = document.getElementById('calendar').getBoundingClientRect().top + window.scrollY;\n                if (window.scrollY >= originalTop)\n                    document.getElementById('topRow').style.top = window.scrollY - originalTop + 'px';\n                else\n                    document.getElementById('topRow').style.top = '0px';\n            },\n            handleInnerSectionScroll() {\n                //Make sure calender y cant be changed\n                document.getElementById('innerSection').scrollTop = 0;\n            },\n            \n            timeSlotHover(id, mouseOverTimeSlot) {\n                if (mouseOverTimeSlot) {\n                    this.previousTimeSlotColor = document.getElementById(id).style.backgroundColor;\n                    document.getElementById(id).style.backgroundColor = 'silver';\n                }\n                if (!mouseOverTimeSlot)\n                    document.getElementById(id).style.backgroundColor = this.previousTimeSlotColor;\n            },\n            timeSlotClicked(location, id) {\n                id = id.slice(8).split(':');\n                var startTime = [\n                    parseInt(((id[1]-1) / 12), 10) + parseInt(this.hours[0].time.substring(0, this.hours[0].time.length - 2)),\n                    (id[1]-1) % 12 * 5\n                ];\n                var endTime = [\n                    startTime[0],\n                    startTime[1]\n                ];\n\n                if (startTime[1] == 55) {\n                    endTime[0] += 1;\n                    endTime[1] = 0;\n                }\n                else\n                    endTime[1] += 5;\n\n                if (startTime[0] < 10)\n                    startTime[0] = '0'+startTime[0];\n                if (startTime[1] < 10)\n                    startTime[1] = '0'+startTime[1];\n                if (endTime[0] < 10)\n                    endTime[0] = '0'+endTime[0];\n                if (endTime[1] < 10)\n                    endTime[1] = '0'+endTime[1];\n                \n                this.$parent.closeModals();\n                this.$parent.$refs.BookingModal.openModal(this.date, location, startTime[0]+':'+startTime[1], endTime[0]+':'+endTime[1]);\n            },\n\n            bookingClicked(booking) {\n                this.$parent.closeModals();\n                this.$parent.$refs.BookedModal.openModal(booking);\n            }\n        },\n        \n        beforeMount() {\n            //console.log('beforeMount');\n            this.getDate();\n        },\n        mounted() {\n            //console.log('mounted');\n            //Start check booking loop\n            this.checkBookingsLoop();\n            //Start time highlighter loop\n            this.styleTimeHighlighterLoop();\n            //Start page scroll listener\n            window.addEventListener('scroll', this.handlePageScroll);\n        },\n        beforeDestroy() {\n            //console.log('beforeDestroy');\n            //End check booking loop\n            clearTimeout(this.checkBookingsTimeout);\n            //End time highlighter loop\n            clearTimeout(this.timeHighlighterTimeout);\n            //End page scroll listener\n            window.removeEventListener('scroll', this.handlePageScroll);\n        }\n    }\n</script>\n"],"sourceRoot":"src/views/3. user views/components/calendars"}]}